<div class="weui-media-box weui-media-box_text">
  <div class="weui-media-box__title">
    <span><%= product_part_taxon.part_taxon.name %></span>
    <span class="weui-panel__extra is-size-7">
      <span><%= product_part_taxon.select_str %></span>
      <span><%= product_part_taxon.select_range %></span>
    </span>
  </div>
  <div class="weui-media-box__desc" data-controller="custom" data-custom-order="<%= (@production.part_ids & product_part_taxon.part_ids).join(',') %>" data-custom-range="<%= "#{product_part_taxon.min_select},#{product_part_taxon.max_select}" %>">
  <% product_part_taxon.parts.each do |part| %>
    <label class="weui-btn mb-2 <%= product_part_taxon.disabled?(@production.part_ids, part) ? 'weui-btn_mini weui-cell_disabled' : 'weui-btn_mini' %> <%= @production.part_ids.include?(part.id) ? 'weui-btn_primary' : 'weui-btn_default' %>" for="part_<%= part.id %>" id="part_<%= part.id %>_label">
      <span><%= part.name %></span>
      <span class="weui-btn__extra"><%= part.price.to_money.format(html_wrap: true).html_safe %></span>
      <%= hidden_field_tag 'production[part_ids][]', part.id, form: 'edit_custom', id: nil if @production.part_ids.include?(part.id) && product_part_taxon.disabled?(@production.part_ids, part) %>
      <%= check_box_tag 'production[part_ids][]', part.id, @production.part_ids.include?(part.id), disabled: product_part_taxon.disabled?(@production.part_ids, part), data: { action: 'custom#toggle' }, class: 'weui-check', id: "part_#{part.id}", form: 'edit_custom' %>
    </label>
  <% end %>
  </div>
</div>
